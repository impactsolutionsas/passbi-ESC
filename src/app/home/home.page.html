
<ion-content>

  <ion-card>
    <ion-fab vertical="top" (click)="menuList()" horizontal="end">
      <ion-fab-button color="primary" id="open-loading">
        <ion-icon name="menu-outline"></ion-icon>
      </ion-fab-button>
    </ion-fab>
    <ion-card-header>
      <ion-card-title>BUS {{device?.Vehicule?.matricule}} -- {{currentSession?.itinerary?.name}}</ion-card-title>
      <ion-card-subtitle>{{today}}</ion-card-subtitle>
    </ion-card-header>
    <ion-card class="balance-card">
      <ion-card-content>
        <div class="balance-info">
          <ion-label>
            <h2 class="solde">{{currentSession?.revenue}} CFA</h2>
          </ion-label>
        </div>
      </ion-card-content>
    </ion-card>
    <ion-grid>
      <ion-row>
        <ion-col>
          <ion-item detail="false">
            <ion-label>
              <ion-text>{{lastTrip?.rising}} - {{lastTrip?.destination}}</ion-text>
            </ion-label>
          </ion-item>
          <ion-item detail="false">
            <ion-label>
              <ion-text>Ticket en vu - {{currentSession?.lastTicket?.code}}</ion-text>
            </ion-label>
          </ion-item>
          <ion-item [button]="true" detail="false" (click)="newTrip(lastTrip?.rising)" mode="ios" lines="full">
            <ion-label>
              <strong>Rotations</strong>
            </ion-label>
            <div class="metadata-end-wrapper" slot="end">
              <ion-note color="medium">{{currentSession?.trajetCount}}</ion-note>

              <ion-icon color="medium" name="chevron-forward"></ion-icon>
            </div>
          </ion-item>
          <ion-item [button]="true" detail="false" (click)="switchZone()" lines="full" mode="ios">
            <ion-label>
              <strong>Zone</strong>
            </ion-label>
            <div class="metadata-end-wrapper" slot="end">
              <ion-note color="medium">{{zone}}</ion-note>
              <ion-icon color="medium" name="chevron-forward"></ion-icon>
            </div>
          </ion-item>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-card>
  <ion-item mode="ios" lines="none" class="price">
    <ion-grid>
      <ion-row>
        <ion-col size="6" *ngFor="let item of rates">
          <div *ngIf="item?.price" (click)="addTicket(item)">
            <img [src]="'assets/rates/' + item.price + '.svg'"  [ngStyle]="{'width': rateSize}"  alt="{{ item.price }}" />
          </div>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-item>
  <ion-fab slot="fixed" vertical="bottom"  horizontal="end">
    <ion-fab-button color="secondary" (click)="sync()">
      <ion-icon name="sync" color="dark"></ion-icon>
    </ion-fab-button>
  </ion-fab>
</ion-content>
